
VERSION=0.5
MULTI="-j 2"

# 1. to create a distribution/Release:
# perform: 
cvs co lpzrobots
cd lpzrobots
cvs update -dP
cd dist_utils
./createDist.sh

# 2. for extra lib bundle:
# just start ./createextraDist.sh

# 3. for binary distribution:
# take the prepared distribution from 1 and do
cd ../../lpzrobots-${VERSION}
echo -e "/usr/local\nu\ny" | make  # select /usr/local and user (u)
make prepare
make $MULTI libs
make clean
# rm Makefile.conf # the user must use the same conf (i.e. /usr/local and (u) user)
pushd `pwd`
cd ../
tar -czf lpzrobots-${VERSION}-binary-lib-devel-`uname -s`-`uname -m`.tgz lpzrobots-${VERSION}
popd

# 4. RPM and DEB. 
echo -e "/usr\nu\ny" | make conf  # select /usr and user (u)
make prepare
make $MULTI libs
make doc # go and drink another cup of tee or two ;-)

PACKAGEOPTS='--install=no --strip=no --backup=no --pkgname=lpzrobots --pkgversion=$VERSION --pkgarch=`uname -m` --pkglicense="GPL/CC-NC" --pkggroup="Robotics Group for Self-Organization of Control" --provides="" --pakdir=../ --requires=""';

# rpm
sudo checkinstall -R $PACKAGEOPTS make install

# deb
sudo checkinstall -D $PACKAGEOPTS --maintainer="georg.martius@web.de" make install


#5. Create doc package
cp -r doc lpzrobots-${Version}-doc
tar -czf ../lpzrobots-${Version}-doc.tgz lpzrobots-${Version}-doc


#6. to make all examples do that (not needed)
#make install # to make the makefiles find the libs
#cd ode_robots/simulations && make all 
#cd ../../
#cd ode_robots/examples/ && make all
#cd ../../
#cd selforg/simulations && make all
#cd ../../
#cd ga_tools/simulations && make all
#cd ../../

